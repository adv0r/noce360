<krpano>
	
	 <!-- include the videoplayer interface / skin (with VR support) -->
	<include url="../../assets/krpano/skin/videointerface.xml" />

	<!-- Import noce's skin -->
    <include url="../../assets/krpano/skin/noceskin.xml" />



	<!-- Import model plugin for schede -->
	<include url="../../assets/krpano/plugins/showtext.xml" />

	<!-- Override noce's skin -->
	<skin_settings thumbs_opened="true" />

	<!-- Import gyroscope plugin -->
     <plugin name="gyro" devices="html5" keep="true" url="../../assets/krpano/plugins/gyro2.js" enabled="true" camroll="true" friction="0.0"
        touch_mode="full" sensor_mode="1" softstart="0.5" autocalibration="false" />
        
	
	
	<scene name="scene_ciclabile" title="ciclabile" thumburl="panos/ciclabile.tiles/thumb.jpg" lat="" lng="" heading="">


		<view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

		<preview url="panos/ciclabile.tiles/preview.jpg" />

		<image type="CUBE" multires="true" tilesize="512">
			<level tiledimagewidth="2176" tiledimageheight="2176">
				<cube url="panos/ciclabile.tiles/%s/l2/%v/l2_%s_%v_%h.jpg" />
			</level>
			<level tiledimagewidth="1152" tiledimageheight="1152">
				<cube url="panos/ciclabile.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
			</level>
		</image>
	</scene>

	<scene name="videopano" title="Video Ciclabile" thumburl="../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_low_.jpg" onstart="enterVideoMode();">
	

		<!-- include the videoplayer plugin -->
		<plugin name="video"
		        url.html5="../../assets/krpano/plugins/videoplayer.js"
		        pausedonstart="false"
		        loop="false"
		        volume="1.0"
		        onloaded="add_video_sources();"
		        />

		<!-- use the videoplayer plugin as panoramic image source -->
		<image>
			<sphere url="plugin:video" />
		</image>

		<!-- set the default view -->
		<view hlookat="0" vlookat="0" fovtype="DFOV" fov="130" fovmin="75" fovmax="150" distortion="0.0" />

		<!-- add the video sources and play the video -->
		<action name="add_video_sources">
			videointerface_addsource('1024x512','../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_low.mp4|../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_low.webm|../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_iphone-audio.m4a','../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_low_.jpg');

			videointerface_addsource('1920x960','../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_mid.mp4|../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_mid.webm|../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_iphone-audio.m4a','../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_mid_.jpg');

			videointerface_addsource('3840×1920','../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_high.mp4|../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_high.webm|../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_iphone-audio.m4a','../../assets/media/POI-Videos/ciclabile-videoPOI.mp4_high_.jpg');

			if(device.ios,
				<!-- iOS Safari has a very slow 'video-to-webgl-texture' transfer, therefore use a low-res video by default -->
				videointerface_play('1024x512');
			  ,
				videointerface_play('1920x960');
			  );
		</action>
	</scene>

	<!-- start Actions-->

	<!-- startup action - load the first scene -->
	<action name="startup" autorun="onstart">
		loadscene(scene_ciclabile, null, MERGE);
		enterPhotoMode();
	</action>




	<action name="enterVideoMode">		
		hidePhotoSkin();
		showVideoSkin();
	</action>


	<action name="enterPhotoMode">		
		hideVideoSkin();
		showPhotoSkin();
	</action>





	<action name="showPhotoSkin">		
		set(layer[skin_layer_photos].visible, true);
		set(layer[skin_layer_photos].enabled, true);
		set(layer[skin_layer_photos].alpha, 1);
	</action>


	<action name="hidePhotoSkin">		
		set(layer[skin_layer_photos].visible, false);
		set(layer[skin_layer_photos].enabled, false);
		set(layer[skin_layer_photos].alpha, 0);
	</action>

	<action name="showVideoSkin">		
		set(layer[skin_layer_videos].visible, true);
		set(layer[skin_layer_videos].enabled, true);
		set(layer[skin_layer_videos].alpha, 1);
	</action>


	<action name="hideVideoSkin">		
		set(layer[skin_layer_videos].visible, false);
		set(layer[skin_layer_videos].enabled, false);
		set(layer[skin_layer_videos].alpha, 0);
	</action>





	<action name="togglescheda" type="Javascript"><![CDATA[
		toggleScheda();
	]]></action>

	<!-- end Actions-->


</krpano>
